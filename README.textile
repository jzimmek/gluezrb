h1. Gluez

Gluez is a system configuration toolkit. You describe the system state as a list of tasks. These will be translated in a single big bash script. Running the script executes the relevant tasks as bash command and takes your system into the desired state.

h2. Getting Started

* Install ruby 1.9 on your local pc

* Install the gluez gem

bc. gem install gluez
  
* Describe your system

bc. cat >~/example.rb <<\EOF
#!/usr/bin/env ruby
require 'gluez'
puts Gluez::run [
  [:package, 'nginx']
]
EOF

* Make it executable
    
bc. chmod +x ~/example.rb
  
* Execute it
  
bc. ~/example.rb

h2. Generated Bash Code

bc. #!/bin/bash
set -e
function package_nginx {
  if [[ $(apt-cache policy nginx | grep Installed | wc -l) -eq 1 && $(apt-cache policy nginx | grep Installed | grep '(none)' | wc -l) -eq 0 ]]; then
    echo "[ up2date     ] package_nginx"
  else
    apt-get install nginx --yes
    if [[ $(apt-cache policy nginx | grep Installed | wc -l) -eq 1 && $(apt-cache policy nginx | grep Installed | grep '(none)' | wc -l) -eq 0 ]]; then
      echo "[ applied     ] package_nginx"
    else
      echo "[ not applied ] package_nginx"
      exit 1
    fi
  fi
}
package_nginx

h2. Simulate Execution

bc. cat >~/example.rb <<\EOF
#!/usr/bin/env ruby
require 'gluez'
puts Gluez::run [
  [:package, 'nginx']
], :simulate => true
EOF

h2. Remote Execution over SSH

bc. ~/example.rb | ssh root@yourhost

h2. Copyright

Copyright (c) 2009 Jan Zimmek. See LICENSE for details.